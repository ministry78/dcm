/*! ContextMenus 2013-06-02 */
var analtics,_gaq;_gaq=_gaq||[],_gaq.push(["_setAccount","UA-35761644-1"]),_gaq.push(["_trackPageview"]),analtics=function(){var t,e;return t=document.createElement("script"),t.type="text/javascript",t.async=!0,t.src="https://ssl.google-analytics.com/ga.js",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)},analtics();var KEY,TIMER,URL,alertResponse,copy2Clipboard,copyResponse,createQR,createUrl,getOauth,queryKd,shortenUrl,shortenUrlAlert,shortenUrlCopy;queryKd=function(t,e){var o;return o=new XMLHttpRequest,o.open("GET","http://www.kuaidi100.com/autonumber/auto?num="+t,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){var c,r,s,n,l;if(4===o.readyState&&0!==o.status){for(r=JSON.parse(o.responseText),l=[],s=0,n=r.length;n>s;s++)c=r[s],l.push(show("http://www.kuaidi100.com/chaxun?com="+c.comCode+"&nu=%s",t,e));return l}},o.send(),1},copy2Clipboard=function(t){var e;return e=document.getElementById("url"),void 0!==e?(e.value=t,e.select(),document.execCommand("copy",!1,null)):void 0},createUrl=function(){var t;return t=document.createElement("input"),t.type="text",t.id="url",document.body.appendChild(t)},createUrl(),createQR=function(t,e){var o;return o=localStorageGet("qr_size",250),show("http://chart.apis.google.com/chart?chs="+o+"x"+o+"&cht=qr&chl=%s",t,e)},qrcode.callback=function(t){return/\w{3,}:\/\/*/.test(t)?chrome.tabs.create({url:t}):alert(t)},copyResponse=function(t){return"error"===t.status?alert("response error"):copy2Clipboard(t.message)},alertResponse=function(t){return"error"===t.status?alert("response error"):alert(t.message)},shortenUrlCopy=function(t,e){return shortenUrl(t,e,copyResponse)},shortenUrlAlert=function(t,e){return shortenUrl(t,e,alertResponse)},shortenUrl=function(t,e,o){var c,r,s;return r=getOauth().hasToken()&&!e,s=new XMLHttpRequest,s.open("POST",""+URL+"?key="+KEY,!0),s.setRequestHeader("Content-Type","application/json"),r&&s.setRequestHeader("Authorization",oauth.getAuthorizationHeader(URL,"POST",{key:KEY})),s.onreadystatechange=function(){var t;return 4===s.readyState&&0!==s.status?(clearTimeout(c),t=JSON.parse(s.responseText),void 0===t.id?("401"===t.error.code&&oauth.clearTokens(),o({status:"error",message:t.error.message}),console.error("error:%s",t.error.message)):(o({status:"success",message:t.id,added_to_history:r}),console.debug("success:%s",t.id))):void 0},s.send(JSON.stringify({longUrl:t})),c=setTimeout(function(){return s.abort(),o({status:"error",message:chrome.i18n.getMessage("timeout_occurred")})},1e4),console.debug("短网址: %s",t)},KEY="AIzaSyAfKgyjoxWmR4RJyRhmk0X-J7q2WB9TbGA",TIMER=null,URL="https://www.googleapis.com/urlshortener/v1/url",getOauth=function(){return window.OAUTH||(window.OAUTH=ChromeExOAuth.initBackgroundPage({request_url:"https://www.google.com/accounts/OAuthGetRequestToken",authorize_url:"https://www.google.com/accounts/OAuthAuthorizeToken",access_url:"https://www.google.com/accounts/OAuthGetAccessToken",consumer_key:"293074347131.apps.googleusercontent.com",consumer_secret:"2AtwN_96VFpevnorbSWK8czI",scope:"https://www.googleapis.com/auth/urlshortener",app_name:"Right search menu"})),window.OAUTH};var createMenu,execute,getContexts,getType,getUrls,getValue,init,isCurrent,menuReset,onClickHandler,show,__indexOf=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};init=function(){var t,e,o;if(!localStorageGet("three_run",!1)){e=chrome.i18n.getMessage("i18n"),localStorageSet("en",!0),"cn"===e&&(localStorageSet("zh_CN",!0),t={txtSelect:["baidu","translate","zdic","amazon","taobao"],picSelect:["google_pic","baidu_pic","qr_decode"],linSelect:["weibo_lin","gmail_lin","qr_lin"],menSelect:["i_title"]}),"tw"===e&&(localStorageSet("zh_TW",!0),t={txtSelect:["bing","translate","gmail_txt","Amazon_com"],picSelect:["google_pic","su_pic"],linSelect:["gmail_lin","qr_lin"],menSelect:["i_title"]}),"en"===e&&(t={txtSelect:["bing","translate","Amazon_com"],picSelect:["google_pic","su_pic"],linSelect:["gmail_lin","qr_lin"],menSelect:["i_title"]});for(o in t)localStorageSet(o,localStorageGet(o,t[o]));chrome.tabs.create({url:"options.html",selected:!0}),localStorageSet("three_run",!0),_gaq.push(["_trackEvent","option","init"])}return menuReset()},chrome.runtime.onInstalled.addListener(init),getUrls=function(t,e,o){var c,r,s,n,l,a,i;for(s=[],n=0,a=o.length;a>n;n++)if(r=o[n],_gaq.push(["_trackEvent","menu",r]),r in t)s.push(t[r]);else{for(l=0,i=e.length;i>l;l++)c=e[l],c[0]!==r||s.push(c[1]);s.push(r)}return s},getValue=function(t,e,o){return{men:e.url,txt:t.selectionText,pic:t.srcUrl,lin:t.linkUrl}[o]},show=function(t,e,o){var c,r,s;return null==o&&(o=!1),t=t.toLowerCase(),r=/%s/g,r.test(t)&&(r.lastIndex=0,t=t.replace(r,encodeURIComponent(e))),s=/%u/g,s.test(t)&&(s.lastIndex=0,t=t.replace(s,encoden(e))),c=/%g/g,c.test(t)&&(c.lastIndex=0,t=t.replace(c,encodeToGb2312(e))),chrome.tabs.getAllInWindow(null,function(e){var c,r,s;for(r=0,s=e.length;s>r;r++)if(c=e[r],isCurrent(c.url,t))return chrome.tabs.update(c.id,{selected:!o}),void 0;return chrome.tabs.create({url:t,selected:!o}),!0}),!0},isCurrent=function(t,e){return 0===t.indexOf("chrome-extension")&&t.indexOf(e)>0?!0:e===t},getType=function(t){var e,o,c,r;for(r=["men","txt","pic","lin"],o=0,c=r.length;c>o;o++)if(e=r[o],t===e[0])return e;return"menu"},execute=function(t,e,o,c){var r,s;return null==c&&(c=!1),s={kd:queryKd,qr:createQR,qr_pic:createQR,qr_txt:createQR,qr_lin:createQR,qr_decode:qrcode.decode},t in s&&s[t](e,c),r={su:shortenUrlCopy,su_lin:shortenUrlCopy,su_pic:shortenUrlCopy,su_alert:shortenUrlAlert,su_lin_alert:shortenUrlAlert,su_pic_alert:shortenUrlAlert},t in r?r[t](e,o,c):void 0},onClickHandler=function(t,e){var o,c,r,s,n,l,a,i,u,h,p,m,g,d,_,w;a=t.menuItemId[0],l=t.menuItemId.slice(1),a=getType(a),o=__indexOf.call(localStorageGet(""+a+"Back",[]),l)>=0,u=[],l in URLS&&(u.push(URLS[l]),_gaq.push(["_trackEvent","menu",l])),h=getValue(t,e,a),r=localStorageGet(a+"Custom",[]);for(p=0,d=r.length;d>p;p++)c=r[p],c[0]===l&&(u.push(c[1]),_gaq.push(["_trackEvent","menu",l]));for(n=localStorageGet(a[0]+"cGroup",[]),m=0,_=n.length;_>m;m++)s=n[m],s[0]===l&&(u=getUrls(URLS,r,s[1]));for(g=0,w=u.length;w>g;g++)i=u[g],/:|.htm/.test(i)?show(i,h,o):execute(i,h,e.incognito,o);return!0},chrome.contextMenus.onClicked.addListener(onClickHandler),menuReset=function(){return chrome.contextMenus.removeAll(function(){var t,e,o,c;for(c=["men","txt","pic","lin"],e=0,o=c.length;o>e;e++)t=c[e],createMenu(t);return console.debug("重置菜单完毕")})},getContexts=function(t){return{men:"page",txt:"selection",pic:"image",lin:"link"}[t]},createMenu=function(t){var e,o,c,r,s,n,l;for(o=localStorageGet(""+t+"Back",[]),s=localStorageGet(t+"Select",[]),n=0,l=s.length;l>n;n++)c=s[n],r=c in URLS?chrome.i18n.getMessage(c):c,e=__indexOf.call(o,c)>=0,e&&(r="√ "+r),console.info(r),chrome.contextMenus.create({title:r,contexts:[getContexts(t)],id:t[0]+c});return console.debug("创建菜单%s",t)},menuReset();var URLS={google_site:"https://www.google.com/search?q=site%3A%s",google_link:"https://www.google.com/search?q=link%3A%s",bing_site:"http://www.bing.com/search?q=site%3A%s",gmail_lin:"https://mail.google.com/mail/?view=cm&fs=1&source=mailto&body=%s&tf=1",facebook_lin:"https://www.facebook.com/dialog/feed?app_id=365325133587367&redirect_uri=https%3A//www.facebook.com&link=%s",qr_lin:"qr_lin",su_lin:"su_lin",su_lin_alert:"su_lin_alert",twitter_lin:"https://twitter.com/intent/tweet?url=%s ",weibo_lin:"http://service.weibo.com/share/share.php?url=%s&appkey=1144650722",i_title:"options.html",c_extensions:"chrome://extensions/",c_clearBD:"chrome://settings/clearBrowserData",c_downloads:"chrome://downloads/",c_flags:"chrome://flags/",c_settings:"chrome://settings/",c_history:"chrome://history/",c_bookmarks:"chrome://bookmarks/#1",c_plugins:"chrome://plugins/",c_version:"chrome://version/",facebook_menu:"https://www.facebook.com/dialog/feed?app_id=365325133587367&link=%s&redirect_uri=https%3A//www.facebook.com",gmail_page:"https://mail.google.com/mail/?view=cm&fs=1&tf=1&source=mailto&body=%s",qr:"qr",su:"su",su_alert:"su_alert",c_memory:"chrome://memory-redirect/",c_credits:"chrome://credits/",twitter_men:"https://twitter.com/intent/tweet?url=%s  ",tmall:"http://s.click.taobao.com/t_9?p=mm_31528417_0_0&l=http%3A%2F%2Fwww.tmall.com",taobao_ju:"http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB05%2Bm7rfGKas1PIKp0U37pZuBotzOg7OjeU9mIWS5%2B5UROBz6sq4fiHePnGhf6UrWuOtfD2G6QGcAHIXpjhEtESpuqsRo0a&pid=mm_31528417_0_0",tmall_chaoshi:"http://s.click.taobao.com/t_9?p=mm_31528417_0_0&l=http%3A%2F%2Fchaoshi.tmall.com",tmall_dq:"http://s.click.taobao.com/t_9?p=mm_31528417_0_0&l=http%3A%2F%2F3c.tmall.com",taobao_trip:"http://s.click.taobao.com/t?e=zGU34CA7K%2BPkqB05%2Bm7rfGKas1PIKp0U37pZuBotzOg7OjY%2F2R0Ke3HHzv2kJZUH%2FehqodvBvxouiCPW7UkqmIn4pk08catp7aU2wpqfONSeQJM%3D&pid=mm_31528417_0_0",yihao:"http://www.yihaodian.com?tracker_u=102737490",taobao_game:"http://s.click.taobao.com/t_9?p=mm_31528417_0_0&l=http%3A%2F%2Fgame.taobao.com%2F",tmall_temai:"http://s.click.taobao.com/t_9?p=mm_31528417_0_0&l=http%3A%2F%2Ftemai.tmall.com",tmall_flist:"http://s.click.taobao.com/t_9?p=mm_31528417_0_0&l=http%3A%2F%2Flist.tmall.com%2Fsearch_product.htm%3Fcat%3D50023647%26style%3Dg",weibo:"http://service.weibo.com/share/share.php?appkey=1144650722&url=%s",google_pic:"http://www.google.com/searchbyimage?image_url=%s",facebook_pic:"https://www.facebook.com/dialog/feed?app_id=365325133587367&picture=%s&redirect_uri=https%3A//www.facebook.com",gmail_pic:"https://mail.google.com/mail/?view=cm&tf=1&source=mailto&body=%s&fs=1",qr_decode:"qr_decode",qr_pic:"qr_pic",su_pic_alert:"su_pic_alert",su_pic:"su_pic",TinEye:"http://www.tineye.com/search/?url=%s",SauceNAO:"http://saucenao.com/search.php?db=999&url=%s",iqdb:"http://iqdb.org/?url=%s",twitter_pic:"https://twitter.com/intent/tweet?url=%s",baidu_pic:"http://stu.baidu.com/i?rt=0&rn=10&ct=1&tn=baiduimage&objurl=%s",sogou_pic:"http://pic.sogou.com/ris?query=%s",weibo_pic:"http://service.weibo.com/share/share.php?appkey=1144650722&pic=%s",google:"https://www.google.com/search?q=%s",bing:"http://www.bing.com/search?q=%s",duckduckgo:"https://duckduckgo.com/?q=%s",google_define:"http://www.google.com/search?hl=en&q=define:%s",translate:"http://translate.google.com/?q=%s",youtube:"http://www.youtube.com/results?search_query=%s",btdigg:"http://btdigg.org/search?q=%s",last:"http://www.last.fm/search?q=%s",google_news:"https://news.google.com/news/search?q=%s",bing_news:"http://www.bing.com/news/search?q=%s",google_img:"https://www.google.com/search?q=%s&tbm=isch",flickr:"http://www.flickr.com/search/?q=%s&w=all",Picasa:"https://picasaweb.google.com/lh/view?q=%s&psc=G&filter=1",bing_images:"http://www.bing.com/images/search?q=%s",wikipedia:"http://zh.wikipedia.org/wiki/%s",gmail_txt:"https://mail.google.com/mail/?view=cm&fs=1&tf=1&body=%s&source=mailto",facebook:"http://www.facebook.com/search/results.php?q=%s",google_plus:"https://plus.google.com/s/%s",findicons:"http://findicons.com/search/%s",qr_txt:"qr_txt",Yahoo:"http://search.yahoo.com/search?p=%s",surfcanyon:"http://www.surfcanyon.com/search?q=%s",hotbot:"http://www.hotbot.com/search/web?q=%s",ask:"http://www.ask.com/web?q=%s",FreeDict:"http://www.thefreedictionary.com/%s",torrentz:"http://torrentz.eu/search?f=%s",rottentomatoes:"http://www.rottentomatoes.com/search/full_search.php?search=%s",bitsnoop:"http://bitsnoop.com/search?q=%s",mtv:"http://www.mtv.com/search/?q=%s",imdb:"http://www.imdb.com/find?s=all&q=%s",bbc:"http://search.bbc.co.uk/search?go=toolbar&uri=/&q=%s",cnn:"http://edition.cnn.com/search/?query=%s&primaryType=mixed&sortBy=date",Amazon_com:"http://www.amazon.com/gp/associates/link-types/searchbox.html?tag=ender0f-20&keyword=%s",ebay:"http://www.ebay.com/sch/i.html?_nkw=%s",alibaba:"http://www.alibaba.com/trade/search?SearchText=%s",twitter_share:"https://twitter.com/intent/tweet?text=%s",twitter:"https://twitter.com/search?q=%s",sootuu:"http://so.sootuu.com/s.asp?ClassID=0&key=%g",veryicon:"http://www.veryicon.com/search/%s",dmoz:"http://www.dmoz.org/search?q=%s",wolframalpha:"http://www.wolframalpha.com/input/?i=%s",baidu:"http://www.baidu.com/s?wd=%s",youdao:"http://www.youdao.com/search?q=%s",google_hk:"https://www.google.hk/search?hl=zh-CN&q=%s",soso:"http://www.soso.com/q?w=%s",yunyun:"http://www.yunyun.com/Search.php?p=1&q=%s",sogou:"http://www.sogou.com/web?query=%s",yahoo_cn:"http://one.cn.yahoo.com/s?p=%s",xunlei:"http://hao123.xunlei.com/so/s.html?w=%s",so_360:"http://so.360.cn/s?ie=utf-8&q=%s",scholar:"https://scholar.google.com/scholar?q=%s&hl=zh-CN",wenku:"http://wenku.baidu.com/search?word=%g",nlc:"http://opac.nlc.gov.cn/F/?request=%s&func=find-m&find_code=WRD&FIND_BASE=NLC01&FIND_BASE=NLC09",tsinghua:"http://innopac.lib.tsinghua.edu.cn/search*chx/t?SEARCH=%s",qidian:"http://sosu.qidian.com/searchresult.aspx?searchkey=%s&searchtype=%E7%BB%BC%E5%90%88",pul:"http://pku.summon.serialssolutions.com/search?s.q=%s",zongheng:"http://search.zongheng.com/search/all/%s/1.html",sul:"http://202.115.54.13:8080/F/-/?func=find-b&find_code=WRD&request=%s&filter_code_1=WLN&filter_request_1=&filter_code_2=WYR&filter_request_2=&filter_code_3=WYR&filter_request_3=&filter_code_4=WFM",bit:"http://ico.bit.edu.cn/opac/openlink.php?strText=%s&doctype=ALL&strSearchType=title&match_flag=forward&displaypg=20&sort=CATA_DATE&orderby=desc&showmode=list&location=ALL",ustc:"http://opac.lib.ustc.edu.cn/opac/search_adv_result.php?sType0=any&q0=%s",bful:"http://222.28.112.228:8000/opac/openlink.php?historyCount=1&doctype=ALL&match_flag=forward&strSearchType=title&strText=%s",xul:"http://210.34.4.28/opac/openlink.php?historyCount=1&strText=%s&doctype=ALL&strSearchType=title&match_flag=forward&displaypg=20&sort=CATA_DATE&orderby=desc&showmode=list&dept=ALL",buofal:"http://202.112.134.140:8080/opac/openlink.php?historyCount=1&strText=%s&doctype=ALL&strSearchType=title&match_flag=forward&displaypg=10&sort=CATA_DATE&orderby=desc&dept=ALL",readnovel:"http://s.readnovel.com/web/search.php?stype=0&keywords=%g",ktxp:"http://bt.ktxp.com/search.php?keyword=%s",popgo:"http://share.popgo.org/search.php?title=%s",bilibili:"http://www.bilibili.tv/search?keyword=",youdao_dict:"http://fanyi.youdao.com/translate?i=%s",zdic:"http://www.zdic.net/zd/search/?q=%s",dict:"http://www.dict.cn/%s",iciba:"http://www.iciba.com/%s",frdic:"http://www.frdic.com/SearchDic.aspx?word=%s",edu5156:"http://xh.5156edu.com/index.php?f_key=%g&f_type=zi",youku:"http://so.youku.com/search_video/q_%s",nds:"https://www.google.com/cse?cx=partner-pub-2754614460323177:6285657766&ie=UTF-8&q=%s",bt:"https://www.google.com/cse?cx=partner-pub-2754614460323177:1956378441&ie=UTF-8&q=%s&gsc=bt%E6%90%9C%E7%B4%A2#gsc.tab=0&gsc.q=%s&gsc.ref=bt%E6%90%9C%E7%B4%A2",video_baidu:"http://video.baidu.com/v?word=%g",EDonkey:"https://www.google.com/cse?cx=partner-pub-2754614460323177:1956378441&ie=UTF-8&q=%s&gsc=%E7%94%B5%E9%A9%B4%E6%90%9C%E7%B4%A2#gsc.tab=0&gsc.q=%s&gsc.ref=%E7%94%B5%E9%A9%B4%E6%90%9C%E7%B4%A2",xiami:"http://www.xiami.com/search?key=%s",yyets:"http://www.yyets.com/php/search/index?keyword=%s",mtime:"http://search.mtime.com/search/?=%s",imax:"http://imax.im/movies/search?ref=plugin-search&q=%s",tudou:"http://so.tudou.com/isearch/%s",gdajie:"http://verycd.gdajie.com/find.htm?keyword=%s",verycd:"http://find.verycd.com/folders/%s",skb9:"http://www.9skb.com/?k=%g",shooter:"http://shooter.cn/search/%s",kankan:"http://search.kankan.com/search.php?keyword=%s",qiyi:"http://www.qiyi.com/common/searchresult.html?key=%s",funshion:"http://www.funshion.com/search/media/search?word=%s",ku6:"http://so.ku6.com/v/q%s",music_baidu:"http://music.baidu.com/search?key=%s",kuwo:"http://sou.kuwo.cn/ws/NSearch?key=%s",baidu_news:"http://news.baidu.com/ns?word=%g",sina_new:"http://search.sina.com.cn/?q=%g&c=news",image_baidu:"http://image.baidu.com/i?ie=utf-8&word=%s",pic_sogou:"http://pic.sogou.com/pics?query=%s",image_youdao:"http://image.youdao.com/search?q=%s",taobao:"http://s8.taobao.com/search?q=%g&bucket_id=11&pid=mm_31528417_3400431_10960519",buy360:"http://search.360buy.com/Search?keyword=%g",amazon:"http://www.amazon.cn/search/search.asp?source=xuender-23&searchType=&searchWord=%s&Submit.x=8&Submit.y=4&Submit=Go",etao:"http://s8.etao.com/search?tb_lm_id=etao_mmsearch_ziya&pid=mm_31528417_3400431_10960519&q=%s",zto:"http://www.zto.cn/SiteInfo/sitesearch.aspx?testselect=%g&listselect=%c5%c9%cb%cd%b7%b6%ce%a7",dangdang:"http://union.dangdang.com/transfer/transfer.aspx?from=P-311221&backurl=http://search.dangdang.com/search.php?key=%s",yihao_t:"http://search.yihaodian.com/s2/c0-0/k%s?tracker_u=102737490",paipai:"http://searchex.paipai.com/cps/html?KeyWord=%g&sClassid=&shoptype=&sf=&searchType=0&pps=etg.0_21217_16_0&outInfo=",eachnet:"http://search.eachnet.com/Search?keyword=%s",vancl:"http://s.vancl.com/search?k=%s&sourcesuninfo=ad-0-20-0-0-5&source=xuender",douban:"http://www.douban.com/search?cat=&q=%s",tieba:"http://tieba.baidu.com/f?kw=%s",weibo_txt:"http://service.weibo.com/share/share.php?appkey=1144650722&title=%s",t_qq:"http://search.t.qq.com/index.php?k=%s",ekoooo:"http://so.ekoooo.com/so?ie=utf-8&q=%s",design52:"http://sc.52design.com/search.asp?skeywords=%g",missyuan:"http://so.missyuan.com/plus/search.php?searchtype=titlekeyword&keyword=%g",baike:"http://baike.baidu.com/searchword/?word=%g",kd:"kd",zhidao:"http://zhidao.baidu.com/search?word=%s",iask:"http://ishare.iask.sina.com.cn/search.php?key=%g",ditu:"https://ditu.google.com/maps?hl=zh-cn&newwindow=1&q=%s",zol:"http://detail.zol.com.cn/index.php?keyword=%g&c=SearchList",kiees:"http://www.kiees.cn/auto.php?wen=%s",ditu_bing:"http://cn.bing.com/ditu/?q=%s",hudong:"http://www.hudong.com/wiki/%s",skycn:"http://www.skycn.com/search.php?ss_name=%g",ks_yahoo:"http://ks.cn.yahoo.com/search.php?keyword=%s",pconline:"http://ks.pconline.com.cn/index.jsp?q=%g",ditu_yahoo:"http://ditu.yahoo.cn/#ls=%s",newhua:"http://search.newhua.com/search_list.php?searchname=%s",google_tw:"https://www.google.tw/search?hl=zh-TW&q=%s",ruten:"http://search.ruten.com.tw/search/s000.php?k=%s"},arrayRemove,findArray,getId,groupBy,isArray,localStorageGet,localStorageSet,sortOn,updateArray;getId=function(t){return null==t&&(t="ID"),void 0===window[t]&&(window[t]=1),window[t]++},isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},findArray=function(t,e,o){var c,r,s,n,l,a,i;if(isArray(o)){for(s=[],n=0,a=o.length;a>n;n++)r=o[n],s.push(findArray(t,e,r));return s}for(l=0,i=t.length;i>l;l++)if(c=t[l],c[e]===o)return c;return null},updateArray=function(t,e,o){var c,r;for(c in t)r=t[c],r===e&&(t[c]=o);return t},arrayRemove=function(t,e){var o,c,r;r=[];for(o in t)c=t[o],c===e&&r.push(t.splice(o,1));return r},sortOn=function(t,e){var o;return"-"===e[0]&&(o=!0,e=e.slice(1)),t.sort(function(t,o){return t[e]<=o[e]?-1:1}),o?t.reverse():void 0},groupBy=function(t,e){var o,c,r,s,n,l;for(s=[],sortOn(t,e),c="_INVALID_GROUP_VALUE_",n=0,l=t.length;l>n;n++)r=t[n],r[e]!==c&&(o={label:r[e],items:[]},c=o.label,s.push(o)),o.items.push(r);return s},localStorageGet=function(t,e){var o;return null==e&&(e=!1),o=localStorage.getItem(t),o?JSON.parse(o):e},localStorageSet=function(t,e){return localStorage.setItem(t,JSON.stringify(e))};